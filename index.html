<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Awakening in the Flood</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
        }

        html {
            scroll-behavior: smooth;
            scroll-snap-type: y proximity;
        }

        /* ========== GLOBAL: LETTERBOXING (宽银幕画幅) ========== */
        body::before,
        body::after {
            content: '';
            position: fixed;
            left: 0;
            width: 100%;
            height: 60px;
            background: #000;
            z-index: 9999;
            pointer-events: none;
        }

        body::before {
            top: 0;
            border-bottom: 1px solid #222;
        }

        body::after {
            bottom: 0;
            border-top: 1px solid #222;
        }

        /* All content must respect letterbox */
        section {
            min-height: 100vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* ========== STAGE 1: OPENING CREDITS ========== */
        #opening {
            background: #000;
            position: relative;
            z-index: 100;
        }

        /* Credits Sequence Container */
        .credits-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;
        }

        .credit-slide {
            position: absolute;
            text-align: center;
            opacity: 0;
            pointer-events: none;
        }

        /* Credit 1: Xinrui Lyu Perform */
        .credit-1 {
            animation: creditFade 6s ease-in-out 0s forwards;
        }

        .credit-1 h2 {
            font-size: 2.5rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            text-transform: uppercase;
        }

        /* Credit 2: Project Info */
        .credit-2 {
            animation: creditFade 6s ease-in-out 6s forwards;
        }

        .credit-2 p {
            font-size: 1.2rem;
            font-weight: 300;
            letter-spacing: 0.15em;
            line-height: 1.8;
        }

        /* Credit 3: Main Title */
        .credit-3 {
            animation: titleFade 3s ease-in-out 12s forwards;
        }

        .credit-3 h1 {
            font-size: 4rem;
            font-weight: 300;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        .credit-3 p {
            font-size: 1.3rem;
            letter-spacing: 0.2em;
            opacity: 0.8;
        }

        /* Credit Animations */
        @keyframes creditFade {
            0% { opacity: 0; }
            15% { opacity: 1; }
            85% { opacity: 1; }
            100% { opacity: 0; }
        }

        @keyframes titleFade {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        /* Opening Shot Video Background */
        .opening-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            filter: saturate(1.8) contrast(1.1);
            z-index: 1;
        }

        .opening-video.visible {
            animation: videoFadeIn 4s ease-in 12s forwards;
        }

        @keyframes videoFadeIn {
            to { opacity: 1; }
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: 2;
        }

        /* Scroll Indicator */
        .scroll-cue {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10000;
            opacity: 0;
            cursor: pointer;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .scroll-cue:hover {
            transform: translateX(-50%) translateY(-5px);
            opacity: 1 !important;
        }

        .scroll-cue.visible {
            animation: cueFadeIn 1.5s ease-in 13s forwards, pulseFloat 3s ease-in-out 14.5s infinite;
        }

        @keyframes cueFadeIn {
            to { opacity: 1; }
        }

        @keyframes pulseFloat {
            0%, 100% { transform: translateX(-50%) translateY(0); opacity: 0.6; }
            50% { transform: translateX(-50%) translateY(-15px); opacity: 1; }
        }

        .arrow-down {
            width: 30px;
            height: 30px;
            border-left: 2px solid #fff;
            border-bottom: 2px solid #fff;
            transform: rotate(-45deg);
            transition: border-color 0.3s ease;
        }

        .scroll-cue:hover .arrow-down {
            border-color: #f5576c;
        }

        /* ========== STAGE 2: THE FLOOD ========== */
        #flood {
            background: #000;
            flex-direction: row;
            padding: 0;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s ease, transform 1s ease;
            height: 100vh;
            position: relative;
        }

        #flood.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .flood-left {
            width: 50%;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .flood-carousel {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.8s ease;
        }

        #flood.visible .flood-carousel {
            opacity: 1;
        }

        .flood-image {
            position: absolute;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            filter: saturate(2.5) contrast(1.4) brightness(1.1);
            transform: scale(1.1);
        }

        /* Fast cycling through your 10 colorful city photos - 1.5s each */
        .flood-image:nth-child(1) { 
            animation: rapidFlood 15s infinite 0s; 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/1.png');
        }
        .flood-image:nth-child(2) { 
            animation: rapidFlood 15s infinite 1.5s; 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/2.png');
        }
        .flood-image:nth-child(3) { 
            animation: rapidFlood 15s infinite 3s; 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/3.png');
        }
        .flood-image:nth-child(4) { 
            animation: rapidFlood 15s infinite 4.5s; 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/4.png');
        }
        .flood-image:nth-child(5) { 
            animation: rapidFlood 15s infinite 6s; 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/5.png');
        }
        .flood-image:nth-child(6) { 
            animation: rapidFlood 15s infinite 7.5s; 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/6.png');
        }
        .flood-image:nth-child(7) { 
            animation: rapidFlood 15s infinite 9s; 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/7.png');
        }
        .flood-image:nth-child(8) { 
            animation: rapidFlood 15s infinite 10.5s; 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/8.png');
        }
        .flood-image:nth-child(9) { 
            animation: rapidFlood 15s infinite 12s; 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/9.png');
        }
        .flood-image:nth-child(10) { 
            animation: rapidFlood 15s infinite 13.5s; 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/10.png');
        }

        @keyframes rapidFlood {
            0%, 90%, 100% { 
                opacity: 0; 
                transform: scale(1.15) rotate(0.5deg);
            }
            10%, 80% { 
                opacity: 1; 
                transform: scale(1) rotate(0deg);
            }
        }

        .flood-right {
            width: 50%;
            height: 100vh;
            background: #000;
            position: relative;
            overflow-y: scroll;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
        }

        .flood-content {
            padding: 100px 80px 300px 80px;
            min-height: 150vh;
            opacity: 0;
            transform: translateY(40px);
        }

        .flood-content.visible {
            animation: slideUp 1.5s ease-out forwards;
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .flood-content h2 {
            font-size: 2.8rem;
            font-weight: 300;
            line-height: 1.5;
            margin-bottom: 80px;
            padding-bottom: 40px;
            border-bottom: 1px solid #333;
            color: #fff;
        }

        .flood-content p {
            font-size: 1.15rem;
            line-height: 2;
            color: #bbb;
            margin-bottom: 40px;
            font-weight: 300;
            opacity: 1;
        }

        .flood-right::-webkit-scrollbar {
            width: 8px;
        }

        .flood-right::-webkit-scrollbar-track {
            background: #111;
        }

        .flood-right::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        .flood-right::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* ========== CHAPTER CARD: TRANSITION ========== */
        #chapter-breaths {
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            scroll-snap-align: start;
            scroll-snap-stop: always;
        }

        #chapter-breaths.visible {
            animation: chapterFadeIn 2s ease-in forwards;
        }

        @keyframes chapterFadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        .chapter-title {
            text-align: center;
            opacity: 0;
        }

        #chapter-breaths.visible .chapter-title {
            animation: titleFadeIn 1.5s ease-in 0.5s forwards;
        }

        @keyframes titleFadeIn {
            to { opacity: 1; }
        }

        .chapter-title h3 {
            font-size: 4rem;
            font-weight: 300;
            letter-spacing: 0.5em;
            text-transform: uppercase;
            margin: 0;
        }

        .chapter-title p {
            font-size: 1rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-top: 20px;
            opacity: 0.6;
        }

        /* ========== STAGE 3: THE BREATHS (10 Poems) ========== */
        .breath-section {
            position: relative;
            background: #000;
            scroll-snap-align: start;
            scroll-snap-stop: always;
        }

        .breath-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
            filter: saturate(1.8) contrast(1.1);
        }

        .breath-section {
            position: relative;
            background: #000;
            scroll-snap-align: start;
            scroll-snap-stop: always;
            min-height: 100vh;
            width: 100vw;
            overflow: hidden;
        }

        .poem-frame {
            position: relative;
            z-index: 2;
            background: rgba(255, 255, 255, 0.98);
            color: #000;
            padding: 60px 80px;
            max-width: 750px;
            text-align: center;
            opacity: 0;
            filter: blur(15px);
            transform: scale(0.95);
            transition: transform 0.4s ease;
        }

        .poem-frame:hover {
            transform: scale(1.02);
            cursor: default;
        }

        .breath-section.visible .poem-frame {
            animation: breathAwaken 2.5s ease-out forwards, breathing 5s ease-in-out 2.5s infinite;
        }

        @keyframes breathAwaken {
            to {
                opacity: 1;
                filter: blur(0);
                transform: scale(1);
            }
        }

        @keyframes breathing {
            0%, 100% { 
                opacity: 0.95;
            }
            50% { 
                opacity: 1;
            }
        }

        .poem-frame p {
            font-size: 1.9rem;
            line-height: 1.7;
            font-weight: 400;
            margin-bottom: 35px;
            letter-spacing: 0.02em;
        }

        .poem-location {
            font-size: 0.85rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            opacity: 0;
            font-weight: 300;
        }

        .breath-section.visible .poem-location {
            animation: locationFadeIn 1s ease-in 2.5s forwards;
        }

        @keyframes locationFadeIn {
            to { opacity: 0.5; }
        }

        /* Vibrant saturated backgrounds for each poem */
        #breath1 { 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/1.png');
            background-size: cover;
            background-position: center;
        }
        #breath2 { 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/2.png');
            background-size: cover;
            background-position: center;
        }
        #breath3 { 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/3.png');
            background-size: cover;
            background-position: center;
        }
        #breath4 { 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/4.png');
            background-size: cover;
            background-position: center;
        }
        #breath5 { 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/5.png');
            background-size: cover;
            background-position: center;
        }
        #breath6 { 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/6.png');
            background-size: cover;
            background-position: center;
        }
        #breath7 { 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/7.png');
            background-size: cover;
            background-position: center;
        }
        #breath8 { 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/8.png');
            background-size: cover;
            background-position: center;
        }
        #breath9 { 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/9.png');
            background-size: cover;
            background-position: center;
        }
        #breath10 { 
            background-image: url('https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/10.png');
            background-size: cover;
            background-position: center;
        }

        /* ========== CHAPTER CARD II: THE FLOOD ========== */
        #chapter-flood {
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            scroll-snap-align: start;
            scroll-snap-stop: always;
        }

        #chapter-flood.visible {
            animation: chapterFadeIn 2s ease-in forwards;
        }

        #chapter-flood .chapter-title {
            text-align: center;
            opacity: 0;
        }

        #chapter-flood.visible .chapter-title {
            animation: titleFadeIn 1.5s ease-in 0.5s forwards;
        }

        #grid {
            background: #000;
            padding: 100px 50px;
            min-height: 100vh;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            max-width: 1500px;
            margin: 0 auto;
            justify-items: center;
        }

        .grid-container::after {
            content: '';
            grid-column: 1 / -1;
        }

        .grid-item {
            position: relative;
            height: 320px;
            width: 100%;
            max-width: 450px;
            overflow: hidden;
            cursor: pointer;
        }

        .grid-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: saturate(1.8) contrast(1.2);
            transition: filter 0.6s ease, transform 0.6s ease;
        }

        .grid-item:hover img {
            filter: grayscale(100%) contrast(1.3);
            transform: scale(1.08);
        }

        .grid-item::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 3px solid #fff;
            opacity: 0;
            transition: opacity 0.6s ease;
            pointer-events: none;
        }

        .grid-item:hover::after {
            opacity: 1;
        }

        /* ========== STAGE 5: DOCUMENTATION ========== */
        #documentation {
            background: #000;
            padding: 120px 50px;
            min-height: 100vh;
        }

        .doc-header {
            text-align: center;
            margin-bottom: 100px;
            opacity: 0;
            transform: translateY(30px);
        }

        .doc-header.visible {
            animation: slideUp 1s ease-out forwards;
        }

        .doc-header h2 {
            font-size: 3rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-bottom: 30px;
            color: #fff;
        }

        .doc-header p {
            font-size: 1.2rem;
            color: #bbb;
            letter-spacing: 0.1em;
            font-weight: 300;
        }

        .timeline {
            max-width: 1400px;
            margin: 0 auto;
        }

        .timeline-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 120px;
            opacity: 0;
            transform: translateY(50px);
        }

        .timeline-item.visible {
            animation: fadeInUp 1.2s ease-out forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .timeline-content {
            text-align: center;
            max-width: 800px;
            margin-bottom: 40px;
        }

        .timeline-content h3 {
            font-size: 2rem;
            margin-bottom: 30px;
            color: #fff;
            font-weight: 300;
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }

        .timeline-content p {
            font-size: 1.15rem;
            line-height: 1.9;
            color: #bbb;
            font-weight: 300;
        }

        .timeline-content p strong {
            color: #fff;
            font-weight: 400;
        }

        .timeline-media {
            width: 100%;
            max-width: 1000px;
            min-height: 400px;
            background: #1a1a1a;
            border: 3px solid #333;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timeline-media img,
        .timeline-media video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .timeline-media video {
            max-height: 600px;
        }

        /* Interactive map container - ENHANCED */
        .map-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: #0a0a0a;
            border: 4px solid #444;
            overflow: hidden;
            min-height: 600px;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
            transition: all 0.4s ease;
        }

        .map-container:hover {
            border-color: #666;
            box-shadow: 0 15px 60px rgba(0, 0, 0, 0.9);
            transform: translateY(-5px);
        }

        .map-container img {
            width: 100%;
            height: auto;
            display: block;
            filter: sepia(0.4) contrast(1.2) saturate(0.8) brightness(0.9);
            transition: filter 0.5s ease, transform 0.5s ease;
        }

        .map-container:hover img {
            filter: sepia(0.2) contrast(1.3) saturate(1.2) brightness(1.05);
            transform: scale(1.02);
        }

        /* Pin markers - DRAMATICALLY ENHANCED */
        .map-pin {
            position: absolute;
            width: 32px;
            height: 32px;
            background: radial-gradient(circle, #ff5555 0%, #dd0000 100%);
            border-radius: 50%;
            border: 4px solid #fff;
            cursor: pointer;
            transform: translate(-50%, -50%);
            animation: pinPulse 3s ease-in-out infinite;
            z-index: 10;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.4),
                0 0 0 0 rgba(255, 85, 85, 0.7);
        }

        .map-pin::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            background: #fff;
            border-radius: 50%;
            opacity: 0;
            transition: all 0.4s ease;
        }

        .map-pin::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid rgba(255, 85, 85, 0.5);
            opacity: 0;
            transition: all 0.4s ease;
        }

        .map-pin:hover {
            transform: translate(-50%, -50%) scale(1.6);
            animation: none;
            z-index: 20;
            background: radial-gradient(circle, #ff7777 0%, #ff2222 100%);
            box-shadow: 
                0 8px 24px rgba(255, 68, 68, 0.8),
                0 0 30px rgba(255, 68, 68, 0.6),
                0 0 60px rgba(255, 68, 68, 0.3);
            border-color: #ffdddd;
        }

        .map-pin:hover::before {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.2);
        }

        .map-pin:hover::after {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.3);
        }

        .map-pin:active {
            transform: translate(-50%, -50%) scale(1.4);
        }

        @keyframes pinPulse {
            0%, 100% { 
                box-shadow: 
                    0 4px 12px rgba(0, 0, 0, 0.4),
                    0 0 0 0 rgba(255, 85, 85, 0.7);
            }
            50% { 
                box-shadow: 
                    0 4px 12px rgba(0, 0, 0, 0.4),
                    0 0 0 25px rgba(255, 85, 85, 0);
            }
        }

        /* Location label - DRAMATICALLY ENHANCED */
        .location-label {
            position: absolute;
            top: -65px;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            background: linear-gradient(135deg, #1a1a1a 0%, #000 100%);
            color: #fff;
            padding: 12px 22px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            font-weight: bold;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid #ff5555;
            letter-spacing: 0.1em;
            box-shadow: 
                0 8px 24px rgba(0, 0, 0, 0.8),
                0 0 20px rgba(255, 85, 85, 0.3);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .location-label::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid #ff5555;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .location-label::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 85, 85, 0.1) 0%, transparent 100%);
            border-radius: 8px;
            z-index: -1;
        }

        .map-pin:hover .location-label {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Pin number indicator - DRAMATICALLY ENHANCED */
        .pin-number {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #000 0%, #1a1a1a 100%);
            color: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            border: 3px solid #fff;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.6),
                0 0 20px rgba(255, 255, 255, 0.3);
            transform: scale(0.5) rotate(-90deg);
        }

        .map-pin:hover .pin-number {
            opacity: 1;
            transform: scale(1) rotate(0deg);
            background: linear-gradient(135deg, #ff5555 0%, #dd0000 100%);
            border-color: #ffdddd;
            box-shadow: 
                0 4px 12px rgba(255, 85, 85, 0.8),
                0 0 20px rgba(255, 85, 85, 0.5);
        }

        /* Add staggered pin entrance animation */
        @keyframes pinEntrance {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0) rotate(180deg);
            }
            60% {
                transform: translate(-50%, -50%) scale(1.2) rotate(-10deg);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }
        }

        .timeline-item.visible .map-pin {
            animation: pinEntrance 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        /* ========== STAGE 6: REFLECTION ========== */
        #reflection {
            background: #000;
            flex-direction: row;
            padding: 0;
        }

        .reflection-left {
            width: 50%;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .reflection-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: saturate(1.9);
        }

        .reflection-gradient {
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradientFlow 20s ease infinite;
        }

        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .reflection-right {
            width: 50%;
            height: 100vh;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 80px;
        }

        .reflection-content h2 {
            font-size: 2.8rem;
            font-weight: 300;
            line-height: 1.5;
            margin-bottom: 50px;
        }

        .reflection-content p {
            font-size: 1.15rem;
            line-height: 1.9;
            color: #bbb;
            margin-bottom: 25px;
        }

        .reflection-right:hover ~ .reflection-left {
            opacity: 0.5;
            transition: opacity 0.8s ease;
        }

        /* ========== FOOTER ========== */
        footer {
            background: #000;
            text-align: center;
            padding: 60px 40px;
            border-top: 1px solid #222;
        }

        footer p {
            color: #555;
            font-size: 0.9rem;
            letter-spacing: 0.15em;
            line-height: 1.8;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 968px) {
            body::before, body::after {
                height: 40px;
            }

            .credit-1 h2 { font-size: 1.8rem; }
            .credit-3 h1 { font-size: 2.5rem; }

            #flood, #reflection {
                flex-direction: column;
            }

            .flood-left, .flood-right,
            .reflection-left, .reflection-right {
                width: 100%;
                height: 50vh;
            }

            .poem-frame {
                padding: 40px;
                max-width: 90%;
            }

            .poem-frame p {
                font-size: 1.4rem;
            }

            .timeline-item {
                flex-direction: column !important;
                gap: 30px;
            }

            .grid-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <!-- STAGE 1: OPENING CREDITS -->
    <section id="opening">
        <video class="opening-video" muted loop playsinline>
            <source src="videos/open.mp4" type="video/mp4">
        </video>
        <div class="video-overlay"></div>

        <div class="credits-container">
            <div class="credit-slide credit-1">
                <h2>Xinrui Lyu Presents</h2>
            </div>

            <div class="credit-slide credit-2">
                <p>Project Three: Street Intervention<br>Public/Private Voice</p>
            </div>

            <div class="credit-slide credit-3">
                <h1>Awakening in the Flood</h1>
            </div>
        </div>

        <div class="scroll-cue">
            <div class="arrow-down"></div>
        </div>
    </section>

    <!-- STAGE 2: THE FLOOD -->
    <section id="flood">
        <div class="flood-left">
            <div class="flood-carousel">
                <div class="flood-image"></div>
                <div class="flood-image"></div>
                <div class="flood-image"></div>
                <div class="flood-image"></div>
                <div class="flood-image"></div>
                <div class="flood-image"></div>
                <div class="flood-image"></div>
                <div class="flood-image"></div>
                <div class="flood-image"></div>
                <div class="flood-image"></div>
            </div>
        </div>
        <div class="flood-right">
            <div class="flood-content">
                <h2>A poem awakens in the flood of urban information</h2>
                
                <p>On the streets of Toronto, ten poems stand in black and white— amid the flood of color, like breath itself, creating pockets of pause.</p>
                
                <p>This is a quiet resistance.<br>A collective awakening.</p>
                
                <p>When your gaze meets a line of poetry,<br>the city's frequency skips a beat.<br>In that second, the world recalibrates.</p>
                
                <p>Breathing becomes the most lucid revolution.</p>
                
                <p>This project is submitted for the FA/PANF 2500 course as "Project Three: Street Intervention — Public/Private Voice."</p>
                
                <p>The core task was to develop a method for generating ten standalone sentences and introducing them as "private voices" into "public space."</p>
                
                <p>My concept, "Awakening in the Torrent," frames the city as a saturated flood of advertisements and information. In response, I created ten black-and-white poetic lines — each acting as a pause, a breath.</p>
                
                <p>I printed these verses and placed, pasted, or installed them across downtown Toronto: on bulletin boards, in phone booths, against walls.</p>
                
                <p>This website serves as a visual diary of the intervention — tracing the journey from conception and production to final placement — capturing the moments when these private voices were discovered in public view.</p>
            </div>
        </div>
    </section>

    <!-- CHAPTER CARD: THE BREATHS -->
    <section id="chapter-breaths">
        <div class="chapter-title">
            <h3>I. The Breaths</h3>
            <p>Ten Poems in the Flood</p>
        </div>
    </section>

    <!-- STAGE 3: THE BREATHS (10 Poems) -->
    <section id="breath1" class="breath-section">
        <div class="poem-frame">
            <p>The lie shattered our love, leaving nothing but regret and chaos.</p>
            <div class="poem-location">Street Pole</div>
        </div>
    </section>

    <section id="breath2" class="breath-section">
        <div class="poem-frame">
            <p>Hope fades with time, but memory keeps the past alive.</p>
            <div class="poem-location">Payment Terminal</div>
        </div>
    </section>

    <section id="breath3" class="breath-section">
        <div class="poem-frame">
            <p>Desire meets sadness when the future forgets its dreams.</p>
            <div class="poem-location">Poster Wall</div>
        </div>
    </section>

    <section id="breath4" class="breath-section">
        <div class="poem-frame">
            <p>Change steals our moment, yet habit brings it back again.</p>
            <div class="poem-location">Public Board</div>
        </div>
    </section>

    <section id="breath5" class="breath-section">
        <div class="poem-frame">
            <p>The distance between connection and mind is measured in time.</p>
            <div class="poem-location">Community Board</div>
        </div>
    </section>

    <section id="breath6" class="breath-section">
        <div class="poem-frame">
            <p>The wind crosses the ocean of silence, bringing back what we miss.</p>
            <div class="poem-location">Subway Window</div>
        </div>
    </section>

    <section id="breath7" class="breath-section">
        <div class="poem-frame">
            <p>Love touches the future through endless time.</p>
            <div class="poem-location">Cork Board</div>
        </div>
    </section>

    <section id="breath8" class="breath-section">
        <div class="poem-frame">
            <p>Rain remembers the truth that time tried to erase.</p>
            <div class="poem-location">Bench</div>
        </div>
    </section>

    <section id="breath9" class="breath-section">
        <div class="poem-frame">
            <p>The future forgets our regret but not our desire.</p>
            <div class="poem-location">Subway Platform</div>
        </div>
    </section>

    <section id="breath10" class="breath-section">
        <div class="poem-frame">
            <p>Rain is nature's tears; wind is nature's sigh.</p>
            <div class="poem-location">Park Bench</div>
        </div>
    </section>

    <!-- CHAPTER CARD II: THE FLOOD -->
    <section id="chapter-flood">
        <div class="chapter-title">
            <h3>II. The Flood</h3>
            <p>Return to the Torrent</p>
        </div>
    </section>

    <!-- STAGE 4: RETURN TO FLOOD (Grid) -->
    <section id="grid">
        <div class="grid-container">
            <div class="grid-item"><img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/1.png" alt="1"></div>
            <div class="grid-item"><img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/2.png" alt="2"></div>
            <div class="grid-item"><img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/3.png" alt="3"></div>
            <div class="grid-item"><img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/4.png" alt="4"></div>
            <div class="grid-item"><img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/5.png" alt="5"></div>
            <div class="grid-item"><img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/6.png" alt="6"></div>
            <div class="grid-item"><img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/7.png" alt="7"></div>
            <div class="grid-item"><img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/8.png" alt="8"></div>
            <div class="grid-item"><img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/9.png" alt="9"></div>
            <div class="grid-item"><img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/10.png" alt="10"></div>
        </div>
    </section>

    <!-- STAGE 5: DOCUMENTATION -->
    <section id="documentation">
        <div class="doc-header">
            <h2>Process</h2>
            <p>From Conception to Awakening</p>
        </div>
        <div class="timeline">
            <!-- Block 1: Conception -->
            <div class="timeline-item">
                <div class="timeline-content">
                    <h3>I. Conception — Dormant</h3>
                    <p><strong>The Method:</strong> I began by exploring the relationship between time, memory, emotion, and nature. Each sentence was crafted to function independently—a standalone moment of reflection. The constraint was simple: create black-and-white "breaths" that could pause the saturated, chaotic flood of urban information.</p>
                </div>
                <div class="timeline-media">
                    <img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/11.png" alt="Conception process">
                </div>
            </div>

            <!-- Block 2: Production -->
            <div class="timeline-item">
                <div class="timeline-content">
                    <h3>II. Production — Creation</h3>
                    <p><strong>Printing:</strong> The verses were printed on clean white paper with black ink. The process involved printing, cutting, and preparing multiple copies of each sentence—transforming digital text into physical interventions ready to enter public space.</p>
                </div>
                <div class="timeline-media">
                    <img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/12.png" alt="Production process">
                </div>
            </div>

            <!-- Block 3: Intervention -->
            <div class="timeline-item">
                <div class="timeline-content">
                    <h3>III. Intervention — Placement</h3>
                    <p><strong>Poetic Footprints:</strong> Each poem was placed across downtown Toronto. The interactive map below traces these interventions—ten moments when private voices entered public space, waiting to meet anonymous souls at unexpected moments. Hover over the pulsing red pins to see each location, and click any pin to revisit that poem.</p>
                </div>
                <div class="map-container">
                    <img src="https://raw.githubusercontent.com/MoonTotheSea/awakening-flood/main/images/13.png" alt="Toronto intervention map">
                    
                    <!-- 10 interactive pins with numbers matching the poems -->
                    <div class="map-pin" style="top: 48%; left: 38%;" data-poem="1">
                        <div class="location-label">Street Pole</div>
                        <div class="pin-number">1</div>
                    </div>
                    <div class="map-pin" style="top: 32%; left: 50%;" data-poem="2">
                        <div class="location-label">Payment Terminal</div>
                        <div class="pin-number">2</div>
                    </div>
                    <div class="map-pin" style="top: 42%; left: 52%;" data-poem="3">
                        <div class="location-label">Poster Wall</div>
                        <div class="pin-number">3</div>
                    </div>
                    <div class="map-pin" style="top: 35%; left: 42%;" data-poem="4">
                        <div class="location-label">Public Board</div>
                        <div class="pin-number">4</div>
                    </div>
                    <div class="map-pin" style="top: 52%; left: 55%;" data-poem="5">
                        <div class="location-label">Community Board</div>
                        <div class="pin-number">5</div>
                    </div>
                    <div class="map-pin" style="top: 58%; left: 52%;" data-poem="6">
                        <div class="location-label">Subway Window</div>
                        <div class="pin-number">6</div>
                    </div>
                    <div class="map-pin" style="top: 55%; left: 62%;" data-poem="7">
                        <div class="location-label">Cork Board</div>
                        <div class="pin-number">7</div>
                    </div>
                    <div class="map-pin" style="top: 60%; left: 45%;" data-poem="8">
                        <div class="location-label">Bench</div>
                        <div class="pin-number">8</div>
                    </div>
                    <div class="map-pin" style="top: 45%; left: 48%;" data-poem="9">
                        <div class="location-label">Subway Platform</div>
                        <div class="pin-number">9</div>
                    </div>
                    <div class="map-pin" style="top: 38%; left: 60%;" data-poem="10">
                        <div class="location-label">Park Bench</div>
                        <div class="pin-number">10</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- STAGE 6: REFLECTION -->
    <section id="reflection">
        <div class="reflection-left">
            <video class="reflection-video" autoplay loop muted playsinline>
                <source src="videos/close.mp4" type="video/mp4">
            </video>
        </div>
        <div class="reflection-right">
            <div class="reflection-content">
                <h2>Amid the city’s noise, <br>a poem creates space to breathe</h2>
                <p>This project began with a simple constraint: to confront color with black and white, to meet the torrent with quiet.</p>
                
                <p>But in the process of placing these lines, I discovered the power of chance.</p>
                
                <p>I could not predetermine a moment — only create a possibility.</p>
                
                <p>I pasted a poem on the subway window, not knowing whether it would be torn away in five minutes or remain for five days</p>
                
                <p>I didn’t know who would see it — a weary commuter, or a student like me.</p>
                
                <p>Each intervention became an act of trust —<br>trust that this private voice might meet another anonymous soul in some unexpected instant.</p>
                
                <p>In that moment, the poem awakens.<br>That one second of pause — that is the whole meaning of this project.</p>
                
                <p>While carrying out this street intervention, what struck me most was the tension between public and private voices.</p>
                
                <p>I observed how urban space is saturated with colorful, loud commercial messages — a visual torrent.</p>
                
                <p>My black-and-white verses, by contrast, were small, quiet private utterances.<br>When placed side-by-side (as seen in the video), this stark contrast alone created a kind of pause.</p>
                
                <p>The process was filled with chance.</p>
                
                <p>I couldn’t control who would see the poems, or how long they would remain.<br>This inability to predetermine the outcome became central to the work.<br>My intervention was only about creating a possibility in public space.</p>
                
                <p>The true awakening happened in that unexpected instant —<br>when a passerby paused amid the flood of information and read a line of poetry.</p>
                
                <p>This project taught me that the most restrained expression can, at times, create the strongest presence, even in the noisiest of surroundings.</p>
                
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <p>Xinrui Lyu<br>FA/PANF 2500 | Fall 2025<br>Project Three: Street Intervention — Public/Private Voice</p>
    </footer>

    <script>
        // ========== AUDIO MANAGEMENT SYSTEM ==========
        let floodAmbience = null;
        
        // Auto-play opening video and scroll cue
        window.addEventListener('load', () => {
            const openingVideo = document.querySelector('.opening-video');
            const scrollCue = document.querySelector('.scroll-cue');
            
            // Create audio element for flood ambience
            floodAmbience = new Audio('videos/flow.m4a');
            floodAmbience.loop = true;
            floodAmbience.volume = 0;
            
            // Start video at credit 3 (12s)
            setTimeout(() => {
                openingVideo.classList.add('visible');
                openingVideo.play();
                
                // Start audio and fade in to 50% (Opening Credits)
                floodAmbience.play().catch(err => {
                    console.log('Audio autoplay prevented:', err);
                    // Add click-to-play fallback
                    document.body.addEventListener('click', () => {
                        floodAmbience.play();
                        fadeAudio(floodAmbience, 0, 0.5, 2000);
                    }, { once: true });
                });
                fadeAudio(floodAmbience, 0, 0.5, 2000); // Fade to 50% over 2s
            }, 12000);
            
            // Show scroll cue (faster - at 13s)
            setTimeout(() => {
                scrollCue.classList.add('visible');
            }, 13000);
            
            // Scroll cue click interaction
            scrollCue.addEventListener('click', () => {
                const floodSection = document.getElementById('flood');
                floodSection.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        });

        // Audio fade utility
        function fadeAudio(audio, startVol, endVol, duration) {
            if (!audio) return;
            
            const steps = 50;
            const stepDuration = duration / steps;
            const volumeStep = (endVol - startVol) / steps;
            let currentStep = 0;
            
            audio.volume = startVol;
            
            const fadeInterval = setInterval(() => {
                currentStep++;
                audio.volume = Math.max(0, Math.min(1, audio.volume + volumeStep));
                
                if (currentStep >= steps) {
                    clearInterval(fadeInterval);
                    audio.volume = endVol;
                }
            }, stepDuration);
        }

        // ========== FLOOD SECTION: FADE OUT TRIGGER ==========
        const floodRight = document.querySelector('.flood-right');
        const floodSection = document.getElementById('flood');
        const chapterBreaths = document.getElementById('chapter-breaths');
        
        let floodFadedOut = false;
        
        floodRight.addEventListener('scroll', () => {
            if (floodFadedOut) return;
            
            const scrollHeight = floodRight.scrollHeight;
            const scrollTop = floodRight.scrollTop;
            const clientHeight = floodRight.clientHeight;
            
            // Trigger when scrolled near bottom (90% scrolled)
            if (scrollTop + clientHeight >= scrollHeight * 0.9) {
                floodFadedOut = true;
                triggerFloodFadeOut();
            }
        });
        
        function triggerFloodFadeOut() {
            // Step 1: Fade out flood section (visual + audio)
            floodSection.style.transition = 'opacity 1.5s ease-out';
            floodSection.style.opacity = '0';
            
            // Fast fade out audio (Chapter Card I)
            if (floodAmbience) {
                fadeAudio(floodAmbience, floodAmbience.volume, 0, 800); // Fast fade to 0
            }
            
            // Step 2: After fade out, pause (0.5s), then scroll to chapter
            setTimeout(() => {
                chapterBreaths.scrollIntoView({ behavior: 'smooth' });
                
                setTimeout(() => {
                    chapterBreaths.classList.add('visible');
                }, 500);
            }, 1500);
        }

        // ========== REFLECTION: THE FINAL BREATH ==========
        const reflectionRight = document.querySelector('.reflection-right');
        const reflectionLeft = document.querySelector('.reflection-left');
        const reflectionVideo = document.querySelector('.reflection-video');
        
        if (reflectionRight && floodAmbience) {
            // Mouse Enter: The Final Breath - dim visual, silence audio
            reflectionRight.addEventListener('mouseenter', () => {
                // Dim the video/visual torrent
                if (reflectionLeft) {
                    reflectionLeft.style.opacity = '0.3';
                    reflectionLeft.style.transition = 'opacity 0.8s ease';
                }
                
                // Silence the audio torrent
                fadeAudio(floodAmbience, floodAmbience.volume, 0, 800);
            });
            
            // Mouse Leave: Return to Torrent - restore visual and audio
            reflectionRight.addEventListener('mouseleave', () => {
                // Restore the video/visual torrent
                if (reflectionLeft) {
                    reflectionLeft.style.opacity = '1';
                }
                
                // Restore the audio torrent
                fadeAudio(floodAmbience, floodAmbience.volume, 0.5, 1000);
            });
        }

        // ========== INTERSECTION OBSERVER FOR SCENE AUDIO ==========
        const observerOptions = {
            threshold: 0.3,
            rootMargin: '0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    
                    // Scene 2: Introduction/The Flood - Audio Peak to 100%
                    if (entry.target.id === 'flood' && floodAmbience) {
                        fadeAudio(floodAmbience, floodAmbience.volume, 1.0, 1500); // Peak to 100%
                    }
                    
                    // Scene 4: The Breaths - Stay Muted (already at 0 from chapter card)
                    if (entry.target.classList.contains('breath-section') && floodAmbience) {
                        // Audio stays at 0 - silence is the sound here
                    }
                    
                    // Scene 6: Return to Flood (Grid) - Fade back to 50%
                    if (entry.target.id === 'grid' && floodAmbience) {
                        fadeAudio(floodAmbience, floodAmbience.volume, 0.5, 1500); // Back to 50%
                    }
                    
                    // Scene 5: Chapter Card II - Stay Muted
                    if (entry.target.id === 'chapter-flood' && floodAmbience) {
                        // Audio stays at 0
                    }
                    
                    // Scene 8: Reflection - Maintain 50% (will be controlled by hover)
                    if (entry.target.id === 'reflection' && floodAmbience) {
                        fadeAudio(floodAmbience, floodAmbience.volume, 0.5, 1500); // 50% background
                    }
                }
            });
        }, observerOptions);

        // Observe elements
        document.querySelectorAll('.flood-content, .breath-section, .timeline-item, .doc-header, #flood, #grid, #chapter-breaths, #chapter-flood, #reflection').forEach(el => {
            observer.observe(el);
        });

        // ========== MAP PIN INTERACTIONS - ENHANCED ==========
        document.addEventListener('DOMContentLoaded', () => {
            const mapPins = document.querySelectorAll('.map-pin');
            
            mapPins.forEach((pin, index) => {
                // Staggered appearance animation with delay
                pin.style.animationDelay = `${index * 0.2}s`;
                
                // Click interaction - scroll to corresponding poem with visual feedback
                pin.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const poemNumber = pin.getAttribute('data-poem');
                    const poemSection = document.getElementById(`breath${poemNumber}`);
                    
                    if (poemSection) {
                        // Create dramatic flash effect
                        pin.style.background = 'radial-gradient(circle, #fff 0%, #ff5555 100%)';
                        pin.style.transform = 'translate(-50%, -50%) scale(2)';
                        pin.style.boxShadow = '0 0 40px rgba(255, 255, 255, 1), 0 0 80px rgba(255, 85, 85, 0.8)';
                        
                        // Create ripple effect
                        const ripple = document.createElement('div');
                        ripple.style.position = 'absolute';
                        ripple.style.width = '100px';
                        ripple.style.height = '100px';
                        ripple.style.borderRadius = '50%';
                        ripple.style.border = '3px solid #ff5555';
                        ripple.style.top = '50%';
                        ripple.style.left = '50%';
                        ripple.style.transform = 'translate(-50%, -50%)';
                        ripple.style.pointerEvents = 'none';
                        ripple.style.animation = 'rippleOut 1s ease-out forwards';
                        pin.appendChild(ripple);
                        
                        // Reset pin style after flash
                        setTimeout(() => {
                            pin.style.background = '';
                            pin.style.transform = '';
                            pin.style.boxShadow = '';
                            ripple.remove();
                        }, 600);
                        
                        // Scroll to the poem with slight delay
                        setTimeout(() => {
                            poemSection.scrollIntoView({ 
                                behavior: 'smooth',
                                block: 'center'
                            });
                        }, 300);
                    }
                });
                
                // Add hover sound effect simulation (visual pulse)
                pin.addEventListener('mouseenter', () => {
                    pin.style.animationPlayState = 'paused';
                });
                
                pin.addEventListener('mouseleave', () => {
                    pin.style.animationPlayState = 'running';
                });
            });
        });
        
        // Add ripple animation to stylesheet dynamically
        const style = document.createElement('style');
        style.textContent = `
            @keyframes rippleOut {
                0% {
                    transform: translate(-50%, -50%) scale(0);
                    opacity: 1;
                }
                100% {
                    transform: translate(-50%, -50%) scale(3);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>

</body>
</html>
